@model Product

<div class="col-sm-12 col-md-3 my-3 product-wrapper">
    <div class="product-card">
        <a asp-action="Get" asp-controller="Product" asp-route-id="@Model?.ProductId" class="product-link">
            @if (Model?.Discount > 0)
            {
                <div class="discount-tag">
                    <span>%@Model?.Discount</span>
                    <span>İndirim</span>
                </div>
            }

            <div class="img-wrapper">
                <img src="/images/@Model?.ImageUrl" class="product-img" alt="@Model?.ProductName">

                <div class="quick-actions">
                    <form asp-controller="Account" asp-action="AddToFavourites" method="post">
                        <input type="hidden" name="id" value="@Model.ProductId" />
                        <button type="submit" class="action-btn favorite-btn" title="Favorilere Ekle">
                            <i class="far fa-heart"></i>
                        </button>
                    </form>
                    <form asp-controller="Account" asp-action="AddToCompare" method="post">
                        <input type="hidden" name="id" value="@Model.ProductId" />
                        <button type="submit" class="action-btn compare-btn" title="Karşılaştır">
                            <i class="fa fa-exchange-alt"></i>
                        </button>
                    </form>
                </div>
            </div>

            <div class="product-info">
                <h5 class="product-name">@Model?.ProductName</h5>

                <div class="product-rating">
                    @await Component.InvokeAsync("RatingStars", new { productId = Model.ProductId, Mode = "stars" })
                </div>

                <div class="price-info">
                    @if (Model?.ActualPrice > Model?.DiscountPrice)
                    {
                        <span class="old-price">@Model?.ActualPrice.ToString("c")</span>
                    }
                    <span class="current-price">@Model?.DiscountPrice?.ToString("c")</span>
                </div>
            </div>
        </a>

        <div class="cart-action">
            <form asp-controller="Cart" asp-action="AddToCart" method="post">
                <input type="hidden" name="productId" value="@Model.ProductId" />
                <input type="hidden" name="returnUrl" value="@Context.Request.Path" />
                <button type="submit" class="add-to-cart-btn">
                    <span class="btn-text">Sepete Ekle</span>
                    <span class="btn-icon"><i class="fas fa-cart-plus"></i></span>
                </button>
            </form>
        </div>
    </div>
</div>